import{f as z,a as R}from"../chunks/B7MG4pj3.js";import{h as j,J as rt,E as nt,aJ as ot,aK as st,w as it,j as lt,aL as ct,as as J,aM as ft,y as ut,aN as L,a2 as K,u as dt,a3 as ht,a6 as _,a8 as I,a7 as M,B as x,aG as O,a4 as V,a5 as W,G as A,aO as vt,aH as gt}from"../chunks/oSvuh3Mo.js";import{p as Q,b as pt,i as X}from"../chunks/8Gq-cPjj.js";import{o as Y}from"../chunks/CKVxfB1o.js";import{a as mt,d as Z,s as S,e as U}from"../chunks/UVx2M5RY.js";import{s as B}from"../chunks/BT_TxfK9.js";const P=[...` 	
\r\fÂ \v\uFEFF`];function bt(s,e,r){var t=""+s;if(r){for(var a in r)if(r[a])t=t?t+" "+a:a;else if(t.length)for(var o=a.length,n=0;(n=t.indexOf(a,n))>=0;){var u=n+o;(n===0||P.includes(t[n-1]))&&(u===t.length||P.includes(t[u]))?t=(n===0?"":t.substring(0,n))+t.substring(u+1):n=u}}return t===""?null:t}function wt(s,e,r,t,a,o){var n=s.__className;if(j||n!==r||n===void 0){var u=bt(r,t,o);(!j||u!==s.getAttribute("class"))&&(u==null?s.removeAttribute("class"):s.className=u),s.__className=r}else if(o&&a!==o)for(var i in o){var h=!!o[i];(a==null||h!==!!a[i])&&s.classList.toggle(i,h)}return o}const xt=()=>performance.now(),y={tick:s=>requestAnimationFrame(s),now:()=>xt(),tasks:new Set};function $(){const s=y.now();y.tasks.forEach(e=>{e.c(s)||(y.tasks.delete(e),e.f())}),y.tasks.size!==0&&y.tick($)}function yt(s){let e;return y.tasks.size===0&&y.tick($),{promise:new Promise(r=>{y.tasks.add(e={c:s,f:r})}),abort(){y.tasks.delete(e)}}}function G(s,e){J(()=>{s.dispatchEvent(new CustomEvent(e))})}function kt(s){if(s==="float")return"cssFloat";if(s==="offset")return"cssOffset";if(s.startsWith("--"))return s;const e=s.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function H(s){const e={},r=s.split(";");for(const t of r){const[a,o]=t.split(":");if(!a||o===void 0)break;const n=kt(a.trim());e[n]=o.trim()}return e}const _t=s=>s;function tt(s,e,r,t){var a=(s&ct)!==0,o="in",n,u=e.inert,i=e.style.overflow,h,f;function c(){return J(()=>n??=r()(e,t?.()??{},{direction:o}))}var l={is_global:a,in(){e.inert=u,h?.abort(),G(e,"introstart"),h=et(e,c(),f,1,()=>{G(e,"introend"),h?.abort(),h=n=void 0,e.style.overflow=i})},out(p){{p?.(),n=void 0;return}},stop:()=>{h?.abort()}},d=rt;if((d.transitions??=[]).push(l),mt){var v=a;if(!v){for(var g=d.parent;g&&(g.f&nt)!==0;)for(;(g=g.parent)&&(g.f&ot)===0;);v=!g||(g.f&st)!==0}v&&it(()=>{lt(()=>l.in())})}}function et(s,e,r,t,a){if(ft(e)){var o,n=!1;return ut(()=>{if(!n){var g=e({direction:"in"});o=et(s,g,r,t,a)}}),{abort:()=>{n=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(!e?.duration)return a(),{abort:L,deactivate:L,reset:L,t:()=>t};const{delay:u=0,css:i,tick:h,easing:f=_t}=e;var c=[];if(h&&h(0,1),i){var l=H(i(0,1));c.push(l,l)}var d=()=>1-t,v=s.animate(c,{duration:u,fill:"forwards"});return v.onfinish=()=>{v.cancel();var g=1-t,p=t-g,m=e.duration*Math.abs(p),k=[];if(m>0){var w=!1;if(i)for(var F=Math.ceil(m/16.666666666666668),T=0;T<=F;T+=1){var D=g+p*f(T/F),q=H(i(D,1-D));k.push(q),w||=q.overflow==="hidden"}w&&(s.style.overflow="hidden"),d=()=>{var E=v.currentTime;return g+p*f(E/m)},h&&yt(()=>{if(v.playState!=="running")return!1;var E=d();return h(E,1-E),!0})}v=s.animate(k,{duration:m,fill:"forwards"}),v.onfinish=()=>{d=()=>t,h?.(t,1-t),a()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=L)},deactivate:()=>{a=L},reset:()=>{},t:()=>d()}}const Mt=(s,e)=>{const r=s.width,t=s.height,a=s.data,o=new Uint8ClampedArray(a),n=[];let u=0;const i=e/3,h=e*2+1;for(let c=0;c<h;c++){const l=c-e,d=Math.exp(-(l*l)/(2*i*i));n.push(d),u+=d}for(let c=0;c<n.length;c++)n[c]/=u;const f=new Uint8ClampedArray(a.length);for(let c=0;c<t;c++)for(let l=0;l<r;l++){let d=0,v=0,g=0;for(let m=0;m<h;m++){const k=Math.max(0,Math.min(r-1,l+m-e)),w=(c*r+k)*4;d+=a[w]*n[m],v+=a[w+1]*n[m],g+=a[w+2]*n[m]}const p=(c*r+l)*4;f[p]=d,f[p+1]=v,f[p+2]=g,f[p+3]=a[p+3]}for(let c=0;c<t;c++)for(let l=0;l<r;l++){let d=0,v=0,g=0;for(let m=0;m<h;m++){const w=(Math.max(0,Math.min(t-1,c+m-e))*r+l)*4;d+=f[w]*n[m],v+=f[w+1]*n[m],g+=f[w+2]*n[m]}const p=(c*r+l)*4;o[p]=d,o[p+1]=v,o[p+2]=g,o[p+3]=f[p+3]}return new ImageData(o,r,t)},Tt=(s,e)=>{const r=s.canvas.width,t=s.canvas.height,a=Math.max(e.width/r,e.height/t),o=e.width/a,n=e.height/a,u=(r-o)/2,i=(t-n)/2;s.clearRect(0,0,r,t),s.drawImage(e,u,i,o,n)},Ct=(s,e,r)=>{let t=(s+16)/116,a=e/500+t,o=t-r/200;a=.95047*(a*a*a>.008856?a*a*a:(a-16/116)/7.787),t=1*(t*t*t>.008856?t*t*t:(t-16/116)/7.787),o=1.08883*(o*o*o>.008856?o*o*o:(o-16/116)/7.787);let n=a*3.2406+t*-1.5372+o*-.4986,u=a*-.9689+t*1.8758+o*.0415,i=a*.0557+t*-.204+o*1.057;return n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:12.92*u,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,{r:Math.max(0,Math.min(255,n*255)),g:Math.max(0,Math.min(255,u*255)),b:Math.max(0,Math.min(255,i*255))}},At=(s,e,r)=>{let t=s/255,a=e/255,o=r/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92;let n=(t*.4124+a*.3576+o*.1805)/.95047,u=(t*.2126+a*.7152+o*.0722)/1,i=(t*.0193+a*.1192+o*.9505)/1.08883;return n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,{l:116*u-16,a:500*(n-u),b:200*(u-i)}},Et=(s,e)=>{const r=s.width,t=s.height,a=s.data,o=new Uint8ClampedArray(a),n=new Float32Array(r*t*3);for(let f=0;f<r*t;f++){const c=a[f*4+0],l=a[f*4+1],d=a[f*4+2],v=At(c,l,d);n[f*3+0]=v.l,n[f*3+1]=v.a,n[f*3+2]=v.b}const u=1+4*e,i=-e,h=new Float32Array(n);for(let f=1;f<t-1;f++)for(let c=1;c<r-1;c++){const l=(f*r+c)*3,d=n[l]*u+n[((f-1)*r+c)*3]*i+n[((f+1)*r+c)*3]*i+n[(f*r+(c-1))*3]*i+n[(f*r+(c+1))*3]*i;h[l]=Math.max(0,Math.min(100,d))}for(let f=0;f<r*t;f++){const c=h[f*3+0],l=h[f*3+1],d=h[f*3+2],v=Ct(c,l,d);o[f*4+0]=v.r,o[f*4+1]=v.g,o[f*4+2]=v.b}return new ImageData(o,r,t)},It=s=>{const e=s.canvas.width,r=s.canvas.height,t=s.getImageData(0,0,e,r).data;let a=-1,o=-1,n=e,u=-1;for(let l=0;l<r&&a===-1;l++)for(let d=0;d<e;d++)if(t[(l*e+d)*4+3]!==0){a=l;break}if(a===-1)return;for(let l=r-1;l>=a&&o===-1;l--)for(let d=0;d<e;d++)if(t[(l*e+d)*4+3]!==0){o=l;break}for(let l=0;l<e;l++){for(let d=a;d<=o;d++)if(t[(d*e+l)*4+3]!==0){n=l;break}if(n<e)break}for(let l=e-1;l>=n;l--){for(let d=a;d<=o;d++)if(t[(d*e+l)*4+3]!==0){u=l;break}if(u>=n)break}const i=u-n+1,h=o-a+1,f=document.createElement("canvas");f.width=i,f.height=h,f.getContext("2d").drawImage(s.canvas,-n,-a);const c=document.createElement("a");c.href=f.toDataURL("image/png"),c.download="TuringPatternResult.png",c.click()},Lt=s=>s;function at(s,{delay:e=0,duration:r=400,easing:t=Lt}={}){const a=+getComputedStyle(s).opacity;return{delay:e,duration:r,easing:t,css:o=>`opacity: ${o*a}`}}var Ft=z('<button class="w-40 px-5 py-3 self-end bg-rose-700 hover:bg-rose-600 active:bg-rose-800 text-white font-medium rounded-xl transition-colors cursor-pointer">Download</button>'),Dt=z('<div class="relative mb-8 border border-gray-400 bg-gray-200 dark:border-neutral-500 dark:bg-neutral-800 rounded-2xl p-10 flex items-center"><canvas class="w-full rounded-2xl"></canvas> <button aria-label="reset" class="absolute top-0 right-0 m-3 flex items-center justify-center"><svg class="text-neutral-500 hover:text-neutral-400 transition-colors cursor-pointer" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M20.48 3.512a11.97 11.97 0 0 0-8.486-3.514C5.366-.002-.007 5.371-.007 11.999c0 3.314 1.344 6.315 3.516 8.487A11.97 11.97 0 0 0 11.995 24c6.628 0 12.001-5.373 12.001-12.001c0-3.314-1.344-6.315-3.516-8.487m-1.542 15.427a9.8 9.8 0 0 1-6.943 2.876c-5.423 0-9.819-4.396-9.819-9.819a9.8 9.8 0 0 1 2.876-6.943a9.8 9.8 0 0 1 6.942-2.876c5.422 0 9.818 4.396 9.818 9.818a9.8 9.8 0 0 1-2.876 6.942z"></path><path fill="currentColor" d="m13.537 12l3.855-3.855a1.091 1.091 0 0 0-1.542-1.541l.001-.001l-3.855 3.855l-3.855-3.855A1.091 1.091 0 0 0 6.6 8.145l-.001-.001l3.855 3.855l-3.855 3.855a1.091 1.091 0 1 0 1.541 1.542l.001-.001l3.855-3.855l3.855 3.855a1.091 1.091 0 1 0 1.542-1.541l-.001-.001z"></path></svg></button></div> <div class="w-full flex justify-center items-center gap-4 mt-4"><button class="w-40 px-5 py-3 bg-indigo-700 hover:bg-indigo-600 active:bg-indigo-800 text-white font-medium rounded-xl transition-colors cursor-pointer"> </button> <span class="font-bold min-w-15 text-center"> </span> <!></div>',1);function qt(s,e){K(e,!0);let r,t,a=Q(e,"file",15,null);const o=()=>{if(!r)return;let b=t.getImageData(0,0,r.width,r.height);b=Mt(b,5),b=Et(b,5),t.putImageData(b,0,0)};let n=!0;const u=30;let i=O(0),h=O(!1);const f=async()=>{if(!(x(i)!==u&&x(i)!==0)){A(i,0);for(let b=0;b<u&&n;b++)await new Promise(C=>setTimeout(C,1e3/60)),o(),vt(i),await gt();x(i)===u&&A(h,!0)}};dt(()=>()=>{n=!1});const c=()=>{a(null)},l=b=>{const C=URL.createObjectURL(b),N=new Image;N.onload=()=>{URL.revokeObjectURL(C),Tt(t,N)},N.src=C},d=()=>{It(t)};Y(()=>{a()&&(r&&(t=r.getContext("2d",{willReadFrequently:!0})),l(a()))});var v=Dt(),g=ht(v),p=_(g);B(p,"width",1920/2.5),B(p,"height",1080/2.5),pt(p,b=>r=b,()=>r);var m=I(p,2);m.__click=c,M(g);var k=I(g,2),w=_(k);w.__click=f;var F=_(w,!0);M(w);var T=I(w,2),D=_(T);M(T);var q=I(T,2);{var E=b=>{var C=Ft();C.__click=d,R(b,C)};X(q,b=>{x(h)&&b(E)})}M(k),V(()=>{S(F,x(h)?"Continue?":"Animate"),S(D,`${x(i)??""}/30`)}),tt(1,g,()=>at),R(s,v),W()}Z(["click"]);var Rt=z('<label for="file"><svg class="mb-6 text-neutral-500 dark:text-neutral-300" xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 24 24"><path fill="currentColor" d="M6 20q-.825 0-1.412-.587T4 18v-2q0-.425.288-.712T5 15t.713.288T6 16v2h12v-2q0-.425.288-.712T19 15t.713.288T20 16v2q0 .825-.587 1.413T18 20zm5-12.15L9.125 9.725q-.3.3-.712.288T7.7 9.7q-.275-.3-.288-.7t.288-.7l3.6-3.6q.15-.15.325-.212T12 4.425t.375.063t.325.212l3.6 3.6q.3.3.288.7t-.288.7q-.3.3-.712.313t-.713-.288L13 7.85V15q0 .425-.288.713T12 16t-.712-.288T11 15z"></path></svg> <h3 class="text-2xl font-bold mb-2">Drop your image</h3> <p class="mb-6 text-neutral-600 dark:text-neutral-400">or click below to browse</p> <span class="px-5 py-3 bg-indigo-700 hover:bg-indigo-600 active:bg-indigo-800 transition-colors text-white rounded-lg cursor-pointer">Choose File</span> <input accept="image/*" id="file" name="file" type="file" class="hidden"/></label>');function Ot(s,e){K(e,!0);let r=Q(e,"file",15,null);const t=c=>{const l=c.target;l.files===null||l.files.length===0||r()||r(l.files[0])};let a=O(!1);const o=c=>{c.preventDefault(),A(a,!0)},n=c=>{c.preventDefault(),A(a,!1)},u=c=>{c.preventDefault(),A(a,!1);const l=c.dataTransfer;l===null||l.files.length===0||r()||r(l.files[0])};Y(()=>{const c=l=>{const d=l.clipboardData;!d||d.files.length===0||r()||r(d.files[0])};return document.addEventListener("paste",c,{once:!0}),()=>{document.removeEventListener("paste",c)}});var i=Rt();let h;var f=I(_(i),8);f.__change=t,M(i),V(()=>h=wt(i,1,"mb-8 relative border-3 border-dashed bg-gray-200 dark:border-neutral-500 dark:bg-neutral-800 duration-300 transition-colors rounded-2xl p-16 flex flex-col items-center",null,h,{"!border-neutral-400":x(a)})),U("dragover",i,o),U("dragleave",i,n),U("drop",i,u),tt(1,i,()=>at),R(s,i),W()}Z(["change"]);var zt=z('<div class="min-h-screen w-full p-8 select-none bg-linear-to-br from-gray-200 via-gray-100 to-gray-200 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900"><section class="max-w-6xl mx-auto"><header class="mb-10 flex justify-between items-center"><div><h1 class="text-4xl font-sans font-bold mb-3">Turing Patterns</h1> <h3 class="text-2x1 font-mono font-light">See what happens when you blur and sharpen an image multiple times!</h3></div> <a href="https://github.com/murka007/turing-patterns" title="github"><svg class="hover:text-neutral-600 dark:hover:text-neutral-400 transition-colors" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path></svg></a></header> <main><!></main></section></div>');function Gt(s){let e=O(null);var r=zt(),t=_(r),a=I(_(t),2),o=_(a);{var n=i=>{qt(i,{get file(){return x(e)},set file(h){A(e,h,!0)}})},u=i=>{Ot(i,{get file(){return x(e)},set file(h){A(e,h,!0)}})};X(o,i=>{x(e)?i(n):i(u,!1)})}M(a),M(t),M(r),R(s,r)}export{Gt as component};
